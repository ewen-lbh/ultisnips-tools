// Generated by LiveScript 1.6.0
(function(){
  var c, el, els, id, ids, snippet, updateResult, bindToElement, updateSnippetObject;
  c = console.log;
  el = document.querySelector.bind(document);
  els = document.querySelectorAll.bind(document);
  id = document.getElementById.bind(document);
  ids = function(it){
    return it.map(function(it){
      return id(it);
    });
  };
  /*
  Tab handling
  */
  els('._tabbed').forEach(function(tabbedContent){
    var currentTabController, activeTab;
    currentTabController = tabbedContent.dataset.currentTabController;
    activeTab = '';
    return tabbedContent.querySelectorAll("input[type=radio][name='" + currentTabController + "']").forEach(function(tabSelector){
      var setActiveTab;
      setActiveTab = function(){
        var activeTab;
        if (tabSelector.checked) {
          activeTab = tabSelector.value;
          return tabbedContent.querySelectorAll('[data-tab]').forEach(function(tabContent){
            if (tabContent.dataset.tab === activeTab) {
              return tabContent.setAttribute('data-tab-active', '');
            } else {
              return tabContent.removeAttribute('data-tab-active');
            }
          });
        }
      };
      tabSelector.addEventListener('change', setActiveTab);
      return setActiveTab();
    });
  });
  /*
  Snippet generation
  */
  snippet = {
    priority: null,
    postJump: null,
    context: null,
    trigger: '',
    name: '',
    flags: {
      b: false,
      i: false,
      w: false,
      r: false,
      t: false,
      s: false,
      m: false,
      e: false,
      A: false
    },
    content: ''
  };
  updateResult = function(){
    if (document.focusedElement !== id('result')) {
      id('result').value = generateSnippet(
      snippet);
      return c(snippet);
    } else {
      return c('not updating, focused element is the result.');
    }
  };
  updateResult();
  bindToElement = function(elementId, snippetProperty){
    snippetProperty == null && (snippetProperty = null);
    c("binding to " + elementId);
    return id(elementId).addEventListener('input', function(){
      snippet[snippetProperty || elementId] = id(elementId).value;
      return updateResult();
    });
  };
  ['priority', 'name', 'trigger', 'content', 'context'].forEach(function(el){
    return bindToElement(el);
  });
  bindToElement('post-jump', 'postJump');
  ids(['trigger-type--regex', 'trigger-type--text']).forEach(function(it){
    return it.addEventListener('change', function(){
      snippet.flags.r = id('trigger-type--regex').checked;
      return updateResult();
    });
  });
  ['b', 'i', 'A'].forEach(function(flag){
    return id("flag-" + flag).addEventListener('change', function(){
      snippet.flags[flag] = id("flag-" + flag).checked;
      return updateResult();
    });
  });
  /*
  Snippet parsing
  */
  updateSnippetObject = function(){
    var bindToSnippetProperty;
    bindToSnippetProperty = function(elementId, snippetProperty){
      snippetProperty == null && (snippetProperty = null);
      return id(elementId).value = snippet[snippetProperty || elementId];
    };
    ['priority', 'name', 'trigger', 'content', 'context'].forEach(function(it){
      return bindToSnippetProperty(it);
    });
    id('trigger-type--regex').checked = snippet.flags.r;
    id('trigger-type--text').checked = !snippet.flags.r;
    return ['b', 'i', 'A'].forEach(function(it){
      return id("flag-" + it).checked = snippet.flags[it];
    });
  };
  id('analyze-btn').addEventListener('click', function(){
    import$(snippet, extractSnippet(
    id('result').value));
    return updateSnippetObject();
  });
  function import$(obj, src){
    var own = {}.hasOwnProperty;
    for (var key in src) if (own.call(src, key)) obj[key] = src[key];
    return obj;
  }
}).call(this);
